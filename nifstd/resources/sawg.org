#+TITLE: SPARC Anatomy Working Group
#+HTML_HEAD: <meta name="version" content="0.0.1" />
#+OPTIONS: num:nil html-preamble:t H:2
#+SETUPFILE: theme-readtheorg-local.setup
# [[./sawg.html][local development]]
# [[http://ontology.olympiangods.org/trees/sparc][testing]]
# [[http://ontology.neuinfo.org/trees/sparc][production]]

* Developer notes                                                 :noexport:
  This is a self publishing document!
  TODO import code from thesis.org to automate publishing.

** Publishing
   Tangle both blocks here =C-c C-v C-t= (=t= also works) and then you
   can publish this document by running =../bin/publish-sawg= with
   =AUX_RESOLVER_HOST= set in your environment (.e.g via =~/.bashrc=).
   NOTE: if you modify this publish function you need to remove
   [[~/.org-timestamps/sawg-main-page.cache]] otherwise the hash
   will match and nothing will be pushed.
   #+NAME: publish
   #+BEGIN_SRC emacs-lisp :eval never :tangle ../bin/publish.el :comments noweb
     (require 'ox-publish)
     (defun org-custom-hrefl-export (path desc format)
       "export a rooted path as an absolute href with no server"
       (cond ((eq format 'html)
              (format "<a href=\"%s\">%s</a>" path desc))))
     (org-add-link-type "hrefl" 'org-custom-hrefl 'org-custom-hrefl-export)
     (defun org-custom-imgl-export (path desc format)
       "export a rooted path as an absolute img with no server"
       (cond ((eq format 'html)
              (format "<img src=\"%s\">" path))))
     (org-add-link-type "imgl" 'org-custom-imgl 'org-custom-imgl-export)
     (setq org-publish-project-alist
           `(("SPARC-anatomy"
              :components ("sawg-main-page"))
             ("sawg-main-page"
              :base-directory "../resources"
              :base-extension "org"
              :exclude ".*"
              :include ("sawg.org")
              :publishing-directory
              ,(let ((host (getenv "AUX_RESOLVER_HOST")))
                 (format "/ssh:%s|sudo:nginx@%s:/var/www/ontology/trees/sparc/" (getenv "AUX_RESOLVER_HOST") (getenv "AUX_RESOLVER_HOST")))
              :publishing-function org-html-publish-to-html)
             ))
   #+END_SRC

   #+NAME: post-commit
   #+BEGIN_SRC bash :eval never :tangle ../bin/publish-sawg :tangle-mode (identity #o755)
     #!/usr/bin/env sh
     # this runs in the root of the git repository so we are ok
     SOURCE="${BASH_SOURCE[0]}"
     while [ -h "$SOURCE" ]; do # resolve all symlinks
     DIR="$( cd -P "$( dirname "$SOURCE" )" && pwd )"
     SOURCE="$(readlink "$SOURCE")"
     [[ $SOURCE != /* ]] && SOURCE="$DIR/$SOURCE" # resolve relative symlinks
     done
     ABS_PATH="$( cd -P "$( dirname "$SOURCE" )" && pwd )"

     /usr/bin/emacs -Q --batch \
         -l "${ABS_PATH}/publish.el" \
         ../resources/sawg.org \
         --funcall org-publish-all
   #+END_SRC
   
   #+NAME: publish-static
   #+BEGIN_SRC bash :eval never :tangle ../bin/publish-sawg-static :tangle-mode (identity #o755)
     #!/usr/bin/env sh
     IMAGES=/var/www/ontology/trees/images/  # for now make this directory manually if it does not exist ...
     # This does not work directly from google drive
     CMD="curl some-image > bolser-lewis_v1.png; sudo mv bolser-lewis_v1.png ${IMAGES}; sudo chown -R nginx:nginx ${IMAGES}"
     ssh ${AUX_RESOLVER_HOST} "${CMD}"
   #+END_SRC

* Overview
The Stimulating Peripheral Activity to Relieve Conditions ([[http://data.sparc.science/#/home][SPARC]]) effort is the result of National Institutes of Health’s (NIH)
drive to map out the neural circuitry responsible for visceral control in higher vertebrates.

The management of multimodal anatomical knowledge is one of the mainstays of MAP-CORE’s effort in SPARC.
At the core of this effort is the curation of computable and FAIR knowledge for the inferencing of multiscale
parts and connectivity route pathways in support of SPARC metadata discovery.

The SPARC Anatomy Working Group (SAWG) is responsible for the integrity of anatomical knowledge in SPARC.
In particular, it provides the relevant guidance and expertise about:

1. Defining and naming anatomical terms
2. Maintaining ontologies of anatomical knowledge
3. Compiling and curating computable knowledge about multiscale routes pathways

This page provides access to the data generated by the SAWG which includes links to documentation about vocabulary services, term request and connectivity.
This page will be continuously updated.

* Terminology

** Term lists
   It is critical to the SPARC project that these terms lists be synched across the different contexts in which anatomical labels are applied. Towards that goal, we have gathered user requirements for annotation of data sets, images, flatmaps and models and created a set of term lists to make it easier for researchers to review and tools, e.g., MBF Biolucida, to use. 
   Terms are extracted from existing ontologies whenever possible, primarily [[http://www.ontobee.org/ontology/UBERON][UBERON]] and [[http://fma.si.washington.edu/browser/#/][FMA]]. UBERON, a cross species anatomical ontology, is the primary source of terms, but we also draw on FMA extensively for human terms as necessary.
   If the term does not exist in either ontology (UBERON or FMA) they are added to a tool built by UCSD for adding terms to ontologies called [[https://scicrunch.org/scicrunch/interlex/dashboard][InterLex]].
   
   Below is a table containing all current anatomical term sets.  They can be viewed as either a list in Google doc or a tree view in html.  We posted them to Google Docs to make it easy for people to give feedback on individual terms by adding a comment. We also provide additional information on some of these term sets below.
  
  |-------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+-----|
  | Annotation term set                 | Tabular                                                                                                                               | Tree                                                                                    | raw |
  |-------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+-----|
  | Terms added to Interlex by SPARC    | [[https://docs.google.com/spreadsheets/d/1rUQnK2tns5x0HC8jg3OJjiLuPGsYFIodEQ6nPK5iKMk/edit?ts=5d1d0125#gid=308944449][google sheet]]  | [[hrefl:/trees/sparc/view/SparcILX/][trees/query]]                                      | ttl |
  | Brainstem                           | [[https://docs.google.com/spreadsheets/d/1rUQnK2tns5x0HC8jg3OJjiLuPGsYFIodEQ6nPK5iKMk/edit#gid=1992114523][google sheet]]             | [[hrefl:/trees/sparc/view/Brainstem/][trees/query]]                                     | ttl |
  | Spinal cord                         | [[https://docs.google.com/spreadsheets/d/1rUQnK2tns5x0HC8jg3OJjiLuPGsYFIodEQ6nPK5iKMk/edit#gid=675353960][google sheet]]              | [[hrefl:/trees/sparc/view/Spinal Cord/][trees/query]]                                   | ttl |
  | Cranial nerves                      | [[https://docs.google.com/spreadsheets/d/1rUQnK2tns5x0HC8jg3OJjiLuPGsYFIodEQ6nPK5iKMk/edit#gid=1299267287][google sheet]]             | [[hrefl:/trees/sparc/view/Cranial Nerves/][trees/query]]                                | ttl |
  | Nerve roots of spinal cord segments | [[https://docs.google.com/spreadsheets/d/1rUQnK2tns5x0HC8jg3OJjiLuPGsYFIodEQ6nPK5iKMk/edit#gid=1829812400][google sheet]]             | [[hrefl:/trees/sparc/view/Nerve roots of spinal cord segments/][trees/query]] | ttl |
  | Nerves                              | [[https://docs.google.com/spreadsheets/d/1rUQnK2tns5x0HC8jg3OJjiLuPGsYFIodEQ6nPK5iKMk/edit#gid=376794406][google sheet]]              | [[hrefl:/trees/sparc/view/Nerves %28Also Includes Cranial%29/][trees/query]]      | ttl |
  | Ganglia                             | [[https://docs.google.com/spreadsheets/d/1rUQnK2tns5x0HC8jg3OJjiLuPGsYFIodEQ6nPK5iKMk/edit#gid=446711020][google sheet]]              | [[hrefl:/trees/sparc/view/Peripheral Nervous System/Ganglia/][trees/query]]         | ttl |
  | *Model and group terms*             |                                                                                                                                       |                                                                                         |     |
  | Atlas Nomenclature                  | [[https://docs.google.com/spreadsheets/d/1rUQnK2tns5x0HC8jg3OJjiLuPGsYFIodEQ6nPK5iKMk/edit#gid=1966521870][google sheet]]             | [[hrefl:/trees/sparc/view/Atlas Nomenclature/][trees/query]]                          | ttl |
  | ApiNATOMY                           | google sheet                                                                                                                          | trees/query                                                                             | ttl |
  | Peripheral Organ terms sets (MBF)   | [[https://docs.google.com/spreadsheets/d/1rUQnK2tns5x0HC8jg3OJjiLuPGsYFIodEQ6nPK5iKMk/edit?ts=5d1d0125#gid=1213472429][google sheet]] | [[hrefl:/trees/sparc/view/OrganList %28MBF%29/][trees/query]]                           | ttl |
  | Minimal information model           | [[https://docs.google.com/spreadsheets/d/1rUQnK2tns5x0HC8jg3OJjiLuPGsYFIodEQ6nPK5iKMk/edit#gid=1997366910][google sheet]]             | [[hrefl:/trees/sparc/view/Minimal information model %28MIS%29/][trees/query]]       | ttl |
  | Flatmap metadata                    | [[https://docs.google.com/spreadsheets/d/1rUQnK2tns5x0HC8jg3OJjiLuPGsYFIodEQ6nPK5iKMk/edit?ts=5d1d0125#gid=282530304][google sheet]]  | [[hrefl:/trees/sparc/view/FlatMap/][trees/query]]                                       | ttl |
  | 3D scaffold                         | google sheet                                                                                                                          | trees/query                                                                             | ttl |

** Anatomical Terminology
   Anatomy knowledge deals with the precise relationship between a human-readable anatomical term/label and the definition of that
   region (e.g. in the heart, community-wide consensus needs to be reached on the concept label/term “mitral valve” and the definition
   of what it is/what its boundaries are/over which range of organisms does homology of this structure hold). In addition, the
   identification (and, therefore, definition) of certain structures (e.g. subcellular) is dependent on a particular combination of
   preparing/staining/imaging/image processing techniques (i.e. a protocol). The navigation of such a wide combinatorial space of
   concepts, labels, definitions and protocols spawns a heterogeneity of approaches and, in consequence, opinions.

   In this context, the SAWG provides community-supported leadership and arbitration on the accepted relationship between anatomical
   label and definition (and, by extension, the relationship between concepts - i.e. between a label-definition couplet and another).

   In addition, part of this arbitration is to recommend and reconcile different topographical atlases that capture labelled regions
   within a coordinate system for some organ.

   Another part of this arbitration is manifest via the term-request pipeline, in which a curator who has not found an appropriate label
   with which to annotate an image sub-region can submit a new term for global use within SPARC (and beyond).

   1. Documentation for adding terms to the SPARC vocabularies.
      - SPARC has several methods for adding terms to the SPARC vocabularies, depending on the number of terms to be added.  An
        [[https://docs.google.com/presentation/d/1lgjvHoYJIFXYdvY9JLO5577hO3y2rnDxUd3TRmUzLXA/edit#slide=id.g5a45d9742c_0_49][overview]]
        of how to add to the SPARC vocabularies provides detailed instructions.  If you've already gone through the instructions and just want to add terms to the Google Doc template, click [[https://docs.google.com/spreadsheets/d/1mU8Xxqt07pweDmtvdjDriuPSuw0EeGxiKC2733nOgvY/edit#gid=0][here]].  Make sure you add your contact information to the first sheet and then create a copy of the template before adding terms.
      - For internal or advanced users who are familiar with the process, you can access the
        [[https://scicrunch.org/scicrunch/interlex/create][InterLex webpage]] here.

   2. SPARC vocabulary-building instructions
      - Slide presentation outlining the strategy and procedures for building the SPARC vocabularies are
        [[https://docs.google.com/presentation/d/1lgjvHoYJIFXYdvY9JLO5577hO3y2rnDxUd3TRmUzLXA/edit#slide=id.p][located here]]
        - We keep [[https://docs.google.com/spreadsheets/d/1rUQnK2tns5x0HC8jg3OJjiLuPGsYFIodEQ6nPK5iKMk/edit?ts=5d1d0125#gid=308944449][a master list]] of all terms that have been added to Interlex by SPARC researchers for annotation of data, flatmaps or models. Each of these terms are reviewed by a knowledge curator to determine whether or not the term may already exist (for example, it might be a synonym of an existing term) or whether it should be formally added to the SPARC vocabularies.  The SAWG, comprised of SPARC researchers and outside experts, provides advice to the knowledge curators about vocabulary additions. 

   3. Adoption of InterLex terminology services (for developers)
      - [[http://ontology.neuinfo.org/docs/][Ontology documentation]]

   4. Up-to-date term lists for annotation in MBF tools by species and organ,including nomenclatures derived from particular atlases (together with acknowledgment/contact details for leads responsible for each list);
      - [[https://docs.google.com/spreadsheets/d/1rUQnK2tns5x0HC8jg3OJjiLuPGsYFIodEQ6nPK5iKMk/edit?ts=5d1d0125#gid=1213472429][Tabulization of peripheral organ parts]]
      - [[https://docs.google.com/spreadsheets/d/1rUQnK2tns5x0HC8jg3OJjiLuPGsYFIodEQ6nPK5iKMk/edit#gid=1966521870][Atlas nomenclatures]]
      -see table above for CNS and peripheral nervous system structures.

   5. Up-to-date listing of terms applied to SPARC1 metadata annotation
      - [[https://github.com/SciCrunch/sparc-curation/blob/963ddeb7b71c982ea1a449557547d6c38c96371c/sparcur/cli.py#L1162][Term code]]
      - [[http://ontology.neuinfo.org/trees/sparc/view/][All Terms]]

   6. Up-to-date listing of terms applied to flatmap metadata annotation
      - [[https://docs.google.com/spreadsheets/d/1rUQnK2tns5x0HC8jg3OJjiLuPGsYFIodEQ6nPK5iKMk/edit?ts=5d1d0125#gid=282530304][flatmap metadata annotation ]]

   7. Up-to-date listing of terms applied to ApiNATOMY metadata annotation
      [[https://docs.google.com/spreadsheets/d/1rNnobNekjfC4njdD4nwFKcDaVtS9DbwilahmZkpTsGg/edit#gid=1595844649][google sheet]]

   8. Up-to-date listing of terms applied to 3D scaffold metadata annotation
      - Coming soon...

   9. Searchable full reference list of terms (drawn from UBERON/FMA/Nomina/atlases)
      - Coming soon...

* Connectivity
  The development of multiscale route knowledge graphs is leveraging the ApiNATOMY knowledge representation.
  A graphical depiction of an ApiNATOMY model relevant to defensive breathing and Superior Cervical Ganglion physiology is shown below.

  [[imgl:/trees/images/bolser-lewis_v1.png]]

  ApiNATOMY is used to build routing and connectivity graphs for anatomical entities. Such graphs support queries that,
  for instance, identify neural connections that course through a tract, nerve or ganglion. ApiNATOMY-based
  knowledge, therefore, allows the SPARC user to determine the nuclei/grey matter regions affected by the transection
  of a nerve or the stimulation of a ganglion. In addition, the same routing information leveraged by the flatmap GUI
  may be used to discover metadata to SPARC experimental data or simulation models that locate along the route of a
  tract, nerve or ganglion.

  1. Catalogue of ApiNATOMY connectivity models
     - Coming soon

  2. Text-based querying of ApiNATOMY models (and SPARC1 metadata discovery)
     - [[http://ontology.neuinfo.org/trees/sparc/connectivity/query][Simple sample here]]

  3. Flatmap-based querying of ApiNATOMY models (and SPARC1 metadata discovery)
     - Coming soon

* Expertise
  1. Diagram/bibliography repository for flatmap construction
     - TBA

  2. SAWG outside expert working group:  Current members
  
     - [[https://profiles.ucsf.edu/jacqueline.bresnahan][*Jackie Bresnahan, Ph.D.*]]
       =Professor, Neurological Surgery, University of California, San Francisco= \\
       Dr. Bresnahan's research focuses on understanding the biological underpinnings of neurotrauma, particularly spinal cord injury,
       with the goal of improving recovery for individuals who suffer damage to the nervous system. Her laboratory has developed a
       number of models to study cellular systems and behavioral changes that occur as a consequence of injury.

     - [[https://www.med.uvm.edu/neuro/mawe_lab][*Gary Mawe, Ph.D.*]]
       =Samuel W. Thayer Professor of Neurological Sciences, University of Vermont= \\
       Dr. Mawe's research focuses on the neurobiology of GI function in health and disease states and uses a variety of experimental
       approaches including electrophysiology, calcium imaging, immunocytochemistry and molecular biology. He is actively involved in
       teaching anatomy, physiology and comparative neurobiology to undergraduates, graduates students, medical students,  and
       residents.

  3. Discussion forum for requirements collection, gap analysis, feedback
     - Coming soon

  4. Documents section: reports and other publications
     - TBA

  5. Events and other announcements
     - TBA

  6. Challenges: e.g. coursing of visceral autonomic nerves
     - TBA
